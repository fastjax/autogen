# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: pmTwuCnpj04mLJNc1XMtnkktDWmmcgSf7hF+3uswpF+aLRFGS3QkX+wN1DvcGUIff5p3jHSoDE5kEkmofuLtHr5FgwtULMBwb1y3JLMfmk4p4Nf6eNwYDwWQOupxubdzd6SHcQNgTh1bvGRgd4JH/u8k3sLtdojNqh+XP1wYbc186rhbC1ciF4hfU2o18yuBmkSi6Kj33hzirSeQ3LwC34TbD7BLB0di4hUcBdAY/oIPKV6iESOxmv+k/e0dvQimM4rLPV16NW+8NVvREcOSmpDUwAfyFRpkDbrDq9YbSJJMMgPclMy4lvZKwni/91BXV0wqaNAo0CcZZnd0K/omoQZFa4B7EHEUUt023B3l1i2BR1hhZ58X/oGWH44nIiQ3LuWMwRn+BnLzfoJCE1HQym0ANDTIMsM0pe/PMcGZbjdMU2LIG+vMPJZWMB/3VMXMiQqnTPnIsAoVVW42LT7ZUyIKFbSQRDydchQMynlhyTNzaPPVLmcMG6hzzBAp5pmRtPNIJopukPVb0OUXC+KFb/Go0y4yfZlCsjaK+tLZ5w09ISnSvinmuLmK/a+Fb4HJYLx0dvsCXF7s/PGYEcucyBogScIuuMQqzgsYjlL7w1Ki2LllflnIgKanw0pFO/4ouBv7RMxF3hieGfQSKJQmIgif6GKlGllzYLXRzL9atK4=
  - secure: xhQ01gJMdKVntOUmGk8SX/AMtywpPwMcYymu2qPPNEhPJ/4ORPQnsJ7uNq85iEB0fn1bCZoSYT4f/uKRcDDzbSBVWCk8lR7oR6XHFQQZ8ymQ4IuEPvsFiEBoeqGhpShXXs+2deGL7BWCYaQPKYtm+9dZXfCfR8AHU84uDZ9/UxeyGvF7Nsgg6m0m/B7lho3LTiuYoGV1k/6SmS/4DslaC8PasQzFwjS8cm6jSRj5pk9G1qYVFDUl2fBVhbg9jpn5ocqFsVyV3/B2BxWg7MTGY0SMh5HHgSy5uvkTDly6HzE6mz9nx07LrQTTYVFd7n31lfmMHWqeZl18bfgIJMFFWnvdGxPobWFdzXNWetjl9BF9zyprIpal+kWgmXKpkEdVjOK1PHL1Ufb3NBXAXxNjuArr65xicDPHDhuq7K6PjGHQ14jBOEfvcHjIhLoSWVl7KzC+oRjGmjJOeh/0tZB9d0GmIM8R8aS6VNQWOJ0lLq63UhchSQJ32Dgp3Xqx/UNWzhj+G+k5UxTRIiQ2QMIvlmyOIfY6Rq3hbhFu4MuV0jlHBkHVrUjR3/nGYU0N97jvblLKLEFhU/NeUY5mkD7N01xngjny0uQstaOfEv8JhkK31czTOKFTOSV2cozlAf8JU34pQS8ih85pSczqo2tsg+LzxApBxFSprzojr1bF3bo=
  - secure: Uc/m1b1IBk9eUuD99TFLzkpdOxXhCx50NWHw2aktLIOr4DPyNDjUvdVJkWAYeTZrZdTIcFWLonwBWDwQHQJgvmOiQlR0vh1YqNHb8eVAXLKCKdnqW+LdgUEDGs4mS5qO1xgZtcmgHPJvRvrph5jXrYFxkNjgUX1/drxeBUUK4ULbRqWBK6DjAtDHlGXy/0k06eTJ7JWNCzwO2XdiluH/Ovy3y5gzGtKxSat2VsSpwhtnu0BUQd1mWTlGsU9xQtvz3DHceCIMBdutDvOM1v8f9TvDTKWwKcihordSxZptsHMGfRvIMPqkuPiOGEKLwzlK1hRpsSaGoySEna6wlihgv3aOTi2JzrsqqLDMryHgyVtV+4emD9CyL7I4chedK5/h3QFQ2co9UgSStsNu74+3wnfelOYozWyeD+OLAIdeSVEY3I3OXPmZAzS1wzL+Pa578286OhsCT0J5bm1yIvGWdOYyfUfhnZipCM+IfcAHmRKfEheT4t0+IhcgLvo/dQjpnnltsAf487So5JsxVB2QN6XIM6VGifzUnVb1G4YvTlkhLAl2qCdGcadd7eXP3Lgqlp+Q2LkX/yUQOKGAlF/CoYqjpDzTSShVqwC2K9APmer1xhwJdX1FSKyTCpCi6w23hHhOeTQ1uQkr8jblh/ETQ/nRvDGooZYFitS3yOYSjbk=
  - secure: R+anIQDQC+c9hm0YXt1Ezp/yzxTo/FgISP6Qoi+rGVeyO1r/3t7sADgI+xZ4abW+QqAEPB3p4I/b2T6m3WGIYCloMFyfNwcWikdZt+y0HsNQn9qEpmmSBgcoOXRiQIvDGAdJ3HgoZ23egQ0WdDSqZvCEbQqq4GBpVJTlZCP9S3TSgY8dlzHQP1HQAtyWHdoaqJbdqjUgyLgn8Ay3YBgAJ/mqY3F8xJHiaNvUu7g9faQJFoDn8z1My5mTF0iqWQGSdv0IKK4osCbUcMaHzh8aFV6IVyoQH6EnFs/em1ElNfG/1vy0zBbbaHJBtxM9MfuEGkZVpNTCjLhlop0kQG0KO/VWLW/GoaVnZrfALMNJt73Yly9/gvk7ydKZF8+XAG6c8gNb4KqIN44szRJtF5tVJTCPsS+zYoboPQ4/b6TsBw5j8/wc2TU0mtSU+L7MpbG+GyybY+psikIT8lLJDKZqL08Ni2X4nRR0jMC6jSVvqq9plLDSU6gTX1XU/+Wglf8HU7G3kL+zg7Kw6gtyl0gHI+sivoU3tScUTdlDXE2Z0BOl4erjrbUu0LQJ+qbXGWx5gmWk8rQyHIMGlqVlLubWKpQzfugN5ycR4n+xNO0JH2Iq8nfeV3cOaiMKRvwumF4ogzBha+CfwrFyEmQ8CSxqG3OmqgHYW6HhZ6OTMBytObc=
  - secure: ItQt2xzHajiVOaDY6uFNlU4jeZX9NkZ95whw+lTfP/YgjZMtVMf6TTlfIfWkeNUuY/F1IQ6HRaBJn9joLsMAtACV/ZRduQU1fWMHMOZcjmy8lJycl9LsleECAb7XFjEDosLm7/7I2ljIw//GIlm5q4MyLtXIQUef42/NS/MUADrhX8FS5pNPEG/6xz6ni4LBhNYuG/F6XlL5IFu3KRx4NsDc+iTqHSMxhLqjubXofruruFft4DXDU3s8kpwRMFLD28eywLe+Yvwkhfv90XEyoOnjZYWmtWLy8aVyiOXCS0u7ALSR7DPgDFOT2/+IovS0PK4sdY7Q+k+DLkMC/lwvF4CvzYJHjqK9oKqov5DUZz8C9cbR7v7jV8BLAUN9S2pZFS6sf2g6yr001o4pXIUxptl2TxG78u0BsnCfZCO1U9AtN370fyq41zqna+0ySATTyTzzh0jiA5LOXcqP+BkDLd5iq1o7xQXh1dUw0ndLdQWohFiF1LWP+dbnF2/e+uh258h6lN5dtUBmkZgVaf5mOoL3p0BPTZ366J6p9JLVf5Sa10+XYXY8fyrtGp+5rB9QXLVu3YUVC4ohrDloglaL4vbK84CpLdGOsf7pZdOUdeWf3bGtT1ASoNzLHcEZNELh5Zsl217dFpFUguRxRTJbIFSD5IBXCYt+gF9IBiuxCC8=
  - secure: XwiJpp/Bt0qsdYuM/lcQmXR26rJDigkZGyFAfvCCCVSFDQFEMk/4pBwk3muzOKr1pb5TVO6F/hGO+HDFOAa24RYAAdkd2O7vel7y234hfhzoiaRTj1grOXF3dhhCNRdI7CY0vxYqheWSy/A2DRCe6xtR1i7ZBauh4hcwS3ryic3XpIfETCwiuC1tyl5MFogBhuhvz5A03uetrlUZKEmIt4kfAz7EsO2eLHrpgV9xliQupHKeJ2GtE9FCbZQ9txGqVW+bZ0TW8x1vSdUz7jY4r+Ha6xoDABqT+dTCNpqFlKaZHKMjYvbTFkCFUlr4C6ubBqRCGh2QY4XkRCJS2DTBpm7s2sTqQzvQbgo5nd1J7psLBnrCovVer/cm7qODHKjQKejoX+WI6GZjWbcz5v5gdcSntEUDxMk6peCUE9hoJ/0It2A4XBJg3bORGhStisL4UQWaGeKOC+m/jhLxToIqdw9HrgsyLkzNJB3LSF+EHUsDSTRJw55+wrhmyhQl9KARWJjKoY8wFeeaUbeOTB6jAZVZFtQpGDQFCosmN8vVPHmgAC8zbb7pmubOSK8Cy3Gj5v/d0sKe2ycL1LvbwQsvTLNCwq1SI6vQ20AFtcJIGknRHEt3L6dLMCBoAlG1BCpJCKbQRm4+CrtSnXloQ3yLYngBhVuA0cIxOOck6l6h9Xo=
  - secure: tZPUr3VL/NjmF++jdDxMKJRB3YIXnGnbI/cC7zXEXkqFnyl5ZJNZ3FW99hreDc2D78Vy3/vYG4YhWNn+FTPQcVR6ZtqAEVku8f2+1N+c9jjIBnfJNKEElB6IECrEZnpPpVcVYVYEg1kkeEHg3I0oSWRrQXDJkjolyx7Rus1yIWy/90oNHXtsNHw8mp680fpf4qnkIGq8Wj2dOkFgIOnCBleX+R8MBr/hGVkVtk7MbQhICBJujti7ff/1OLsj21pQn8MmJtIVCMv+2bVcuMMyX2nRmNjKv64HB2XUmILM0eRdfOdJQsz58gProEuC4MLT0TjqgR4MFx1GkGUsNqmKxYvwV6qFOY20xDm6AU1x4Z7lBgMpo19i4kVjRHZoH66WZD8C3QHZoh+hn237MiTfpTAUxVUcgMw+rBshFYiDBiK7iP126ZekvsPr33U3r/Yi2E9qP89NAcw3sGlem9w4MFF42v0qGb5EeuWwwBa2AAvhErUQX8S2LQPk5fkrVGXifr9RB3AJOMhte6StEN+E6mV/nYN1v7aj4XUnOIQB1VfLizl7keV3QmDicnyzmB07Kz3jRAqL9h6dk209ClTwl28ICDzzTJphR3N/fVwHgmfwKztexsHkJu5RLuN8E5YlhyrI+0jE3YPwDHyQUDUimNmM/yXmYnRfAT0mq5/rtsA=
